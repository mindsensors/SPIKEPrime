# Paste this script in an empty Python project
# Run once to install
# Warning: it can take a while to download and start. Be patient.
# Watch console output to check progress.
# After reboot DO NOT LET THE SOFTWARE UPDATE YOUR HUB
# Works with the LEGO SPIKE app and the LEGO MINDSTORMS app
#adapted from  https://github.com/antonvh/mpy-robot-tools


from ubinascii import hexlify, a2b_base64
from uhashlib import sha256
from os import mkdir

encoded = (('mindsensors.mpy', ('TQUCHyCKABhaAAcqLi4vbGliL21pbmRzZW5zb3JzLnB5gBgoKDAwMChwICQkJGQgYIvci6yLHYsfji+OW445jlGOqIsRjhSOIQCAURsKdXRpbWUWCHRpbWWAURsOdXN0cnVjdBYBgBAKVGltZXIqARsObWFjaGluZRwDFgFZgBAASCoBGwBzHABIFgBIWYAQCnNsZWVwKgEbCRwDFgFZgFEbBmh1YhYBgBAIcG9ydCoBGwMcAxYBWYAWBElOgRYGT1VUgBYGTE9XgRYESElUMgAQEFNQSUtFaTJjNAIWAVQyARAOVEZUUEFDSzQCFgFUMgIQEFNVTU9FWUVTNAIWAQ==\n', 'VDIDEBJBTFRJTUVURVI0AhYBVDIEEAhESVNUEQk0AxYDVDIFEAxFVjNGUFMRBTQDFgNUMgYQEElSVEhFUk1PEQU0AxYDVDIHEA5FVjNSRklEEQU0AxYDVDIIEAxOWFRDQU0RBTQDFgNUMgkQCEJMT0I0AhYBVDIKEAxUTVAyNzURBzQDFgNUMgsQEkVWM0xJR0hUUxEFNAMWA1QyDBAORVYzRkxPVxEFNAMWA1FjAA2FPAhYAzOMLkRlZWVlixWFEoUThROFIYUPhQqFDYUHhQdlYGVgZUCFCWVAZUAAEQAXFgAWEAMWABp/Fg5pbnRfY2xrMgAWCHRpY2syARYURw==\n', 'UElPX3NldHVwMgIWFkdQSU9fb3V0cHV0MgMWFEdQSU9faW5wdXQigGQqAVMzBBYAETIFFgpTdGFydDIGFg5SZWFkQWNrMgcWEFJlYWROYWNrMggWEldyaXRlQnl0ZTIJFghTdG9wMgoWEHJlYWRCeXRlMgsWEnJlYWRBcnJheTIMFhJ3cml0ZUJ5dGUyDRYUd3JpdGVBcnJheTIOFhRyZWFkU3RyaW5nMg8WFnJlYWRJbnRlZ2VyMhAWInJlYWRJbnRlZ2VyU2lnbmVkMhEWEHJlYWRMb25nMhIWJEdldEZpcm13YXJlVmVyc2lvbjITFhpHZXRWZW5kb3JOYW1lMg==\n', 'FBYWR2V0RGV2aWNlSWRRYwAVaCoOJy2AMQASCHRpbWUUCnNsZWVwsbATL/Q2AVlRYwAAAIkGYW56TCsOMQuANACxFBJkaXJlY3Rpb26yNgFZUWMAAACJCGxpbmUKc3RhdGVMKw43CYA3ALEUAKKyNgFZUWMAAACJBwCiQBoONwWAOgCxFACiNgBjAAAAiQWGQLAFMgARA4A9MCsoKC0tLS0lJiYoKSgpKCgoALEUCG1vZGUSBmh1YhMIcG9ydBMSTU9ERV9HUElPNgFZEh0UHSMENgFZsRMEcDWwGAZTQ0yxEwRwNrAYBlNEQbATBRQfEgZPVVQ2AVmwEwcUBRIFNg==\n', 'AVmwEwcUAKISBEhJNgFZsBMJFACiEgM2AVmysBgOYWRkcmVzc7OK2UQGgCMFsBgrsyKAZNlECYAjBrAYAUIxgLMigxDZRAmAIwewGAFCIICzIodo2UQIgIGwGAFCEICzIpkA2UQIgIGwGAFCAIBRYwQAAIkZFmkyY19hZGRyZXNzDmJpdHJhdGVmAzAuMWYHMi41ZS0wNWYHMi41ZS0wNmYINi4yNWUtMDeCVCEWClN0YXJ0JYBZLi5OTgCwFC+wExMSFzYCWbAULbATBRIXNgJZsBQFsBMZEgU2AlmwFAWwEwcSBkxPVzYCWbAUBbATCRIFNgJZUWMAAACJhSA5JA==\n', 'DlJlYWRBY2sRgGQuIiZOMXcuLk4uTgCwFBGwEw0SBElONgJZgMGAQjGAV8KwFA+wEw8SETYCWbGwFDOwEws2AYfwsvHgwbAUCbATCRITNgJZgeVXiNdDyX9ZsBQPsBMJEhU2AlmwFAuwEwUSCTYCWbAUBbATCxIPNgJZsBQFsBMFEgc2AlmwFAWwEwkSBTYCWbFjAAAAiYUgOSQQUmVhZE5hY2sVgHcuIiZOMXcuLk4uTgCwFBGwEwkSFTYCWYDBgEIxgFfCsBQNsBMPEhE2AlmxsBQVsBMLNgGH8LLx4MGwFAmwEwkSEzYCWYHlV4jXQ8l/WbAUD7ATCRIVNgJZsA==\n', 'FAuwEwUSDzYCWbAUBbATDRIFNgJZsBQFsBMFEg02AlmwFAWwEwkSBTYCWbFjAAAAiYZ4OiwSV3JpdGVCeXRlFYCKKEIuRi4uTi5xLk53Lo4IALEigX/YRAKAf2OwFBGwEwkSETYCWYBCd4BXwrGy8CKBAO8igQDZRDuAsBQNsBMFEhE2AlmwFAWwExESBTYCWbAUBbATBRIRNgJZsBQFsBMJEgU2AllCKoCwFAWwEwUSBTYCWbAUBbATBxIJNgJZsBQFsBMFEgc2AlmB5VeI10ODf1mwFA2wEwsSFTYCWbAUC7ATCxINNgJZsBQFsBMFEg02AllRYwAAAIkIYnl0ZQ==\n', 'ghghFAhTdG9wFYCxTi5OALAUE7ATExIVNgJZsBQRsBMFEg82AlmwFAWwExESEzYCWbAUBbATCRIFNgJZUWMAAACJgjgyHBByZWFkQnl0ZRGAuicrKCctJycAsBQhNgBZsBQbsBMrNgFZsBQDsTYBWbAUBTYAWbAUA7ATBYHtNgFZsBQhNgDCsBQbNgBZsmMAAACJBnJlZ4NoUyIScmVhZEFycmF5D4DEIycrKCctHyEtJwArAMOwFA82AFmwFA+wEw82AVmwFAOxNgFZsBQFNgBZsBQDsBMFge02AVmygfOAQhGAV8SzFAA8sBQnNgA2AVmB5Vha10Ppf1lZsxQAPA==\n', 'sBQRNgA2AVmwFBE2AFmzYwAAAIkRAGuBYCsWEndyaXRlQnl0ZRGA0ScrKCgAsBQRNgBZsBQRsBMRNgFZsBQDsTYBWbAUAbI2AVmwFA02AFlRYwAAAIkNAKKCREsYFHdyaXRlQXJyYXkNgNgnKygfIQCwFA02AFmwFAuwEw02AVmwFAOxNgFZEgBrsjQBgEIOgFfDsBQBsrNVNgFZgeVYWtdD7H9ZWbAUDTYAWVFjAAAAiQ0GYXJygXhzFhRyZWFkU3RyaW5nD4DfJCcfJQAQAAHDsoBCHoBXxBAAARQAaLMSAESwFBuxtPI2ATQBKwI2AcOB5Vha10Pcf1lZs2MAAA==\n', 'AIkJDGxlbmd0aIEYQhQWcmVhZEludGVnZXIJgOUoKiYAsBQJsTYBwrAUAbGB8jYBw7KziPDyxLRjAAAAiQlQKhAicmVhZEludGVnZXJTaWduZWQHgOtIALAUCbE2AcKyYwAAAIkHghBSGBByZWFkTG9uZweA8CgqKiouALAUC7E2AcKwFAGxgfI2AcOwFAGxgvI2AcSwFAGxg/I2AcWys4jw8rSQ8PK1mPDyxrZjAAAAiQdUKRAkR2V0RmlybXdhcmVWZXJzaW9uB4D5KQCwFBGAiDYCwbFjAAAAiVQpEBpHZXRWZW5kb3JOYW1lBYD+KQCwFAWIiDYCwbFjAAAAiQ==\n', 'VCkQFkdldERldmljZUlkBZADKQCwFAWQiDYCwbFjAAAAiYVwEF4OVEZUUEFDSwWcCWdAhQhlIIUJhRFlZWBlYGVAZWVAZYUIZWCNB4UHhQllIGWFDYUNhREAEQAXFgAWEAMWABqAgCsCFhRUb3VjaFBvaW50MgAWABEyARYUcmdiX2hleDU2NTICFgB7MgMWGndyaXRlX2NvbW1hbmQyBBYaY2xlYXJfZGlzcGxheTIFFhJnZXRfdG91Y2gyBhYQcnVuX2RlbW8yBxYcaW52ZXJ0X2Rpc3BsYXkyCBYcc3BsYXNoX2Rpc3BsYXkyCRYYcHJpbnRfc3RyaW5nMgoWGA==\n', 'cHJpbnRfbnVtYmVyMgsWFnByaW50X2Zsb2F0MgwWGnNldF9jdXJzZXJfeHmAgIArAyoBUzMNFhJzZXRfY29sb3IyDhYac2V0X2ZvbnRfc2l6ZTIPFhhzZXRfcm90YXRpb24yEBYSZHJhd19saW5lMhEWFGRyYXdfcGl4ZWwyEhYWZHJhd19iaXRtYXAyExYWZHJhd19jaXJjbGUyFBYcZHJhd19yZWN0YW5nbGUyFRYaZHJhd190cmlhbmdsZVFjABaCECIWABEtkBAlMCsrALGwGAhwb3J0sRQIbW9kZRIGaHViEwUTIE1PREVfRlVMTF9EVVBMRVg2AVkSCHRpbQ==\n', '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\n', 'A1lRYwAAAIkDA3gyDg8JoAoAsBQSd3JpdGVCeXRlsBMZEgBeEgZjbWQ0ATYCWVFjAAAAiQlQGQ4VC6AQALAUFnJlYWRJbnRlZ2VysBMdNgFjAAAAiVgZEBkHoBUnALAUCTYAwbEjAfdjAQAAiWYEMjQuNVAZDhkFoBsAsBQLsBMdNgFjAAAAiYUgCEgMRVYzRlBTB6wiRkZGRkZGRiYmZmCLCmVghQdlYGVAZUBlQGVAZWAAEQAXFgAWEAMWABoigGIWHEVWM2Zwc19BRERSRVNTIoBBFhcigEIWGkVWM2Zwc01hdGNoZWQigEMWGEVWM2Zwc1N0YXR1cyKARBYeRQ==\n', 'VjNmcHNQcm9maWxlSWQigEUWHkVWM2Zwc1Byb2ZpbGVDdCKARhYgRVYzZnBzUHJvZmlsZUNhcCKARBYaRVYzZnBzX2RlbGV0ZSKARRYaRVYzZnBzX2Vucm9sbCKAUhYaRVYzZnBzX3JlbW92ZRETKgFTMwAWABEyARYlMgIWJGdldF9FVjNmcHNfTWF0Y2hlZDIDFiJnZXRfRVYzZnBzX1N0YXR1czIEFihnZXRfRVYzZnBzX1Byb2ZpbGVJZDIFFihnZXRfRVYzZnBzX1Byb2ZpbGVDdDIGFipnZXRfRVYzZnBzX1Byb2ZpbGVDYXAyBxYiZ2V0X0VWM2Zwc19EZQ==\n', 'bGV0ZTIIFiJnZXRfRVYzZnBzX1JlbW92ZTIJFiJnZXRfRVYzZnBzX0Vucm9sbFFjAAqBSLsBFAARKaA6JSUnALKwGBxFVjNmcHNfYWRkcmVzc7GwGD8SAHuxNAFZEhBTUElLRWkyYxQAEbCwEwOwEwU2A1lRYwAAAIkDA1wqDhkJoEQAsBQ/sBMvsTYCWVFjAAAAiQdQGQ4dCaBKALAUEHJlYWRCeXRlsBMxNgFjAAAAiVAZDiEHoFAAsBQHsBMxNgFjAAAAiVAZDiMHoFYAsBQHsBMxNgFjAAAAiVAZDiUHoFsAsBQHsBMxNgFjAAAAiVAZDicHoGAAsBQHsBMxNg==\n', 'AWMAAACJUBkOKQegZQCwFBuwEzE2AWMAAACJgQQqECsHoGosALAUI7ATF7E2AlmwFAuwEy82AWMAAACJElByb2ZpbGVJZIF4IRgvDaBwKycjJ1IAsBQJsBMzNgFZsBQlNgDBQhOAsBQBNgDBEgh0aW1lFBBzbGVlcF9tcyKAZDYBWbGB2EPnf4BjAAAAiYM4CDAQSVJUSEVSTU8NrH1ERkZGRmZAiwllYGVgZWBlYAARABcWABYQAxYAGqoWIElSVEhFUk1PX0FERFJFU1MigEEWMyKAQhYQQU1CSUVOVEMigEQWDlRBUkdFVEMigEYWEEFNQklFTlRGIoBIFg5UQQ==\n', 'UkdFVEYRCyoBUzMAFgARMgEWGTICFhhnZXRfQW1iaWVudEMyAxYYZ2V0X0FtYmllbnRGMgQWFmdldF9UYXJnZXRDMgUWFmdldF9UYXJnZXRGUWMABoEouwESABEZoI4lJQCysBggaXJ0aGVybW9fYWRkcmVzc7GwGAhwb3J0EhBTUElLRWkyYxQAEbCwEwOwEwU2A1lRYwAAAIkDA3gyDhEJoJcAsBQxsBMfEgBeEgZjbWQ0ATYCWVFjAAAAiQlgGQ4XC6CdALAUFnJlYWRJbnRlZ2VysBMjNgEigGT3YwAAAIlgGQ4bB6CjALAUB7ATITYBIoBk92MAAACJYBkOHQ==\n', 'B6CpALAUB7ATIzYBIoBk92MAAACJYBkOHwegrwCwFAewEyM2ASKAZPdjAAAAiYIoCCYORVYzUkZJRAestIkHZWCFCYUKhRWFEQARABcWABYQAxYAGqIqAVMzABYAETIBFhBjbGVhclVJRDICFhxSZWFkQmxvY2tBcnJheTIDFh5SZWFkQmxvY2tTdHJpbmcyBBYgV3JpdGVCbG9ja1N0cmluZzIFFh5Xcml0ZUJsb2NrQXJyYXkyBhYOcmVhZFVJRFFjAAeBKLsBEgARD6C1JSUAsrAYHmV2M3JmaWRfYWRkcmVzc7GwGC8SMRQAEbCwEwOwEwU2A1lRYwAAAIkDFg==\n', 'aTJjX2FkZHJlc3NgIQ4VC6C8ALAUMSKAQSKAQzYCWVFjAAAAiYF4MhQXBaDCMC0qALAUBSKATxIAl7E0ATYCWbAUASKAQRACUjYCWRI9FApzbGVlcII2AVmwFBJyZWFkQXJyYXkigFCQNgJjAAAAiQ5CbG9ja0lEgXgyFCEPoMswLSoAsBQPIoBPEgCXsTQBNgJZsBQBIoBBEA82AlkSDxQPgjYBWbAUFHJlYWRTdHJpbmcigFCQNgJjAAAAiQ+DUGsiIw+g1WIwJiYyJyMuSk0AgMOwFA8igE8SAJexNAE2AlmyX0sgAMSzkNdEFoCwFAEigFCz8hIAl7Q0ATYCWQ==\n', 's4Hyw0Ldf0ISgLAUASKAULPyIwM2AlmzgfLDs5DXQ+h/sBQBIoBBEAJXNgJZs2MBAACJCRRkYXRhU3RyaW5nYgJ4MINQayInC6DqIjAmJjInIy5KTQCAw7AUCyKATxIAl7E0ATYCWbJfSyAAxLOQ10QWgLAUASKAULPyEgCXtDQBNgJZs4Hyw0Ldf0ISgLAUASKAULPyIwM2AlmzgfLDs5DXQ+h/sBQBIoBBEAs2AlmzYwEAAIkLCGRhdGFiAngwgVw5FikLoPsqKioqALAUEHJlYWRCeXRlIoBENgHBsBQBIoBFNgHCsBQBIoBGNgHDsbKI8PKzkPDyxLRjAAAAiQ==\n', 'hwgIbAxOWFRDQU0FvAdERkZGRkZGZmCLCGVAZWBlYGVgZWBlYGVgZWBlQGVAZWBlQGVgZWBlYGVgZWCFFgARABcWABYQAxYAGoIWHE5YVENBTV9BRERSRVNTIoBBFg5DT01NQU5EIoBCFhpOdW1iZXJPYmplY3RzIoBDFgpDb2xvciKARBYKWF9Ub3AigEUWCllfVG9wIoBGFhBYX0JvdHRvbSKARxYQWV9Cb3R0b20RDyoBUzMAFgARMgEWDmNvbW1hbmQyAhYQc29ydFNpemUyAxYWdHJhY2tPYmplY3QyBBYmd3JpdGVJbWFnZVJlZ2lzdGVyczIFFhhzdG9wVA==\n', 'cmFja2luZzIGFhpzdGFydFRyYWNraW5nMgcWFmdldENvbG9yTWFwMggWHGlsbHVtaW5hdGlvbk9uMgkWJHJlYWRJbWFnZVJlZ2lzdGVyczIKFhJ0cmFja0xpbmUyCxYIcGluZzIMFgpyZXNldDINFhhzZW5kQ29sb3JNYXAyDhYeaWxsdW1pbmF0aW9uT2ZmMg8WEnNvcnRDb2xvcjIQFhBmaXJtd2FyZTIRFhBzb3J0Tm9uZTISFiBnZXROdW1iZXJPYmplY3RzgSoBUzMTFhBnZXRCbG9ic1FjABSBKLsBEgARObAcJSUAsbAYCHBvcnSysBgcbnh0Y2FtX2FkZA==\n', 'cmVzcxIQU1BJS0VpMmMUABGwsBMFsBMFNgNZUWMAAACJAwNcKg4tCbAkALAUEndyaXRlQnl0ZbATP7E2AllRYwAAAIkHVBkOMQmwKQCwFAUigEE2AVlRYwAAAIlUGQ4xBbAvALAUBSKAQjYBWVFjAAAAiVQZDjEFsDUAsBQFIoBDNgFZUWMAAACJVBkOMQWwOwCwFAUigEQ2AVlRYwAAAIlUGQ4xBbBBALAUBSKARTYBWVFjAAAAiVQZDjEFsEcAsBQFIoBHNgFZUWMAAACJVBkOMQWwTQCwFAUigEk2AVlRYwAAAIlUGQ4xBbBTALAUBSKASDYBWVFjAAAAiVQZDg==\n', 'MQWwWACwFAUigEw2AVlRYwAAAIlUGQ4xBbBdALAUBSKAUDYBWVFjAAAAiVQZDjEFsGMAsBQFIoBSNgFZUWMAAACJVBkOMQWwaACwFAUigFM2AVlRYwAAAIlUGQ4xBbBuALAUBSKAVDYBWVFjAAAAiVQZDjEFsHQAsBQFIoBVNgFZUWMAAACJVBkOMQWwegCwFAUigFY2AVlRYwAAAIlUGQ4xBbCAALAUBSKAWDYBWVFjAAAAiVAZDjEFsIYAsBQQcmVhZEJ5dGWwExpOdW1iZXJPYmplY3RzNgFjAAAAiYUQ+gEkNQewnCgnJCYoYjMzMzMzAICAgICAKwXCsBQJNg==\n', 'AMOxgfPEsbPYRAqAEgB7IwI0AVmAY7AUCbATCkNvbG9ytIX08jYBV7KAVsWwFAOwEwpYX1RvcLSF9PI2AVeygVbGsBQDsBMKWV9Ub3C0hfTyNgFXsoJWx7AUA7ATEFhfQm90dG9ttIX08jYBV7KDVsiwFAOwExBZX0JvdHRvbbSF9PI2AVeyhFbJEghCTE9Ctba3uLk0BWNRYwEAAIkOYmxvYk51bXMwYmxvYk51bSBpcyBncmVhdGVyIHRoYW4gYW1vdW50IG9mIGJsb2JzIHRyYWNrZWQucAAOAxO8tgARABcWABYQAxYAGjIAFgARUWMAAYEkugQWABEDsLclJQ==\n', 'JSUAsbAYCmNvbG9ysrAYCGxlZnSzsBgGdG9wtLAYCnJpZ2h0tbAYDGJvdHRvbVFjAAAAiQkJCQkJgWwIGgxUTVAyNzUNvMBGRGQga2AAEQAXFgAWEAMWABoigRgWHFRNUDI3NV9BRERSRVNTgRYOQ09NTUFORIAWFFRNUEVSQVRVUkURBSoBUzMAFgARMgEWHnJlYWRUZW1wZXJhdHVyZVFjAAKBKLsBEgARC7DLJSUAsrAYHFRNUDI3NV9hZGRyZXNzsbAYCHBvcnQSEFNQSUtFaTJjFAARsLATA7ATBTYDWVFjAAAAiQMDUBkOCQmwzwCwFCOwEw82AWMAAACJgQ==\n', 'WAgaEkVWM0xJR0hUUwe81GRAiweFCAARABcWABYQAxYAGqwWIkVWM0xpZ2h0c19BRERSRVNTEQEqAVMzABYAETIBFhBTZXRDb2xvcjICFhBTZXRQaXhlbFFjAAOBKLsBEgARCbDcJSUAsrAYIkVWM0xpZ2h0c19hZGRyZXNzsbAYFRIXFAARsLATA7ATBTYDWVFjAAAAiQMDgjgyFgsJsOItLS0tALAUEndyaXRlQnl0ZSKAQSKAUzYCWbAUASKAQrGAVTYCWbAUASKAQ7GBVTYCWbAUASKARLGCVTYCWbAUASKARoE2AllRYwAAAIkGUkdCgmg7GA8HsOotLS0tKw==\n', 'ALAUByKAQSKASTYCWbAUASKAQrKAVTYCWbAUASKAQ7KBVTYCWbAUASKARLKCVTYCWbAUASKARbE2AlmwFAEigEaBNgJZUWMAAACJAFwHgmgIJg5FVjNGTE9XB7z0RSYmJmYgiwllIGUgABEAFxYAFhADFgAaIjgWHkVWM0ZMT1dfQUREUkVTUyKAQRYjIoBGFghGTE9XIoBCFgZWT0wigEMWCkNMRUFSEQkqAVMzABYAETIBFhBnZXRfZmxvdzICFgBGMgMWFGdldF92b2x1bWVRYwAEgSi7ARIAERGw/yUlALKwGB5FVjNGbG93X2FkZHJlc3OxsBgfEiEUABGwsA==\n', 'EwOwEwU2A1lRYwAAAIkDA1gZDgsJwAcAsBQWcmVhZEludGVnZXKwExU2AYH3YwAAAImBECEQAEYFwAstALAUHSKAQSKAQzYCWRIIdGltZRQKc2xlZXAjATYBWVFjAQAAiWYDMC41YBkOFQnADwCwFBByZWFkTG9uZ7ATHTYBIodo92MAAACJ\n'), 'ef4ecbc65b76c27c3a0b758db978916e86d26713937c6eb18904097b4b38bfd6'), ('__init__.mpy', ('TQUCHyBMCAoAByQuLi9saWIvX19pbml0X18ucHkAgRAABSoBGxZtaW5kc2Vuc29yc2lRYwAA\n',), '1614e0dd5f433a7d4a888570ea33c8d6ce1eab01b6b93d4ae79c8f894c3d03a5'))


def calc_hash(b):
    return hexlify(sha256(b).digest()).decode()


error = False
try:
    mkdir('/projects/lib')
except:
    pass

for file, code, hash_gen in encoded:
    print("Writing file ", file)
    target_loc = '/projects/lib/' + file

    print('writing ' + file + ' to folder /projects/lib')
    with open(target_loc, 'wb') as f:
        for chunk in code:
            f.write(a2b_base64(chunk))
    del code

    try:
        print('Finished writing ' + file + ', Checking hash.')
        result = open(target_loc, 'rb').read()
        hash_check = calc_hash(result)

        print('Hash generated: ', hash_gen)

        if hash_check != hash_gen:
            print('Failed hash of .mpy on the robot: ' + hash_check)
            error = True
    except Exception as e:
        print(e)

if not error:
    print('Library written successfully. Reset your hub.')
else:
    print('Failure in writing library!')
